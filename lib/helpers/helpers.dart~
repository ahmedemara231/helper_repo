import 'dart:async';
import 'dart:io';
import 'package:flutter/material.dart';
import 'package:flutter_bloc/flutter_bloc.dart';
import 'package:permission_handler/permission_handler.dart';

class Helpers{
  static String get deviceType => Platform.isIOS? "ios" : "android";

  static bool isBlocProvided<T extends StateStreamableSource>(BuildContext context) {
    try {
      BlocProvider.of<T>(context, listen: false);
      return true;
    } catch (e) {
      return false;
    }
  }

  static Future<void> manageBlocListener(BaseStatus baseStatus, {
    String? msg,
    Function? actionWhenSuccess,
    Function? actionWhenError,
  }) async{
    switch(baseStatus){
      case BaseStatus.success:
        if(msg != null){
          // MessageUtils.showSimpleToast(msg: msg);
        }
        if(actionWhenSuccess != null){
          await actionWhenSuccess();
        }
        break;

      case BaseStatus.error:
        // MessageUtils.showSimpleToast(msg: msg ?? LocaleKeys.thereIsErrorOccurs, color: Colors.red);
        if(actionWhenError != null){
          await actionWhenError();
        }
        break;

      default:
        return;
    }
  }
}